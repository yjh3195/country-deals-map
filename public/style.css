/* public/style.css (FULL REPLACE) v20260123-a
   - Map: topbar compact, no wrap, big map, side panel moved to bottom (full width)
   - Admin: clean card UI restored
   - Avoid conflicting duplicate #map rules
*/

:root{
  --bg:#fbf7ef;
  --card:#ffffff;
  --line:rgba(17,24,39,.10);
  --muted:rgba(17,24,39,.58);
  --shadow:0 10px 26px rgba(0,0,0,.08);
  --radius:18px;
}

*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
  background:var(--bg);
  color:#111827;
}

.page{
  /* ✅ Wider layout so the map grows taller (scale follows width) */
  max-width: 1600px;
  width: min(96vw, 1600px);
  margin: 18px auto 28px;
  padding: 0 16px;
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

.muted{ color:var(--muted); }
.small{ font-size:12px; }

/* =========================
   MAP (index.html)
   ========================= */

.topbar{
  flex-wrap: nowrap;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding:14px 16px;
}

.topbar h1{
  margin:0;
  font-size:25px;
  letter-spacing:-.2px;
  line-height:1.15;
}
.topbar .sub{
  margin-top:6px;
  font-size:10px;
  color:var(--muted);
}

/* 오른쪽 버튼 영역: 줄바꿈 방지 + 넘치면 가로 스크롤 */
.topActions{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
  white-space:nowrap;
  overflow-x:auto;
  padding-bottom:2px;
}
.topActions::-webkit-scrollbar{ height:6px; }
.topActions::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.15); border-radius:999px; }

.chip{
  border:1px solid rgba(17,24,39,.14);
  background:#fff;
  border-radius:999px;
  padding:7px 10px;
  font-size:10px;
  font-weight:600;
  cursor:pointer;
}
.chip.isOn{
  border-color:#111827;
  background:#111827;
  color:#fff;
}
.chip.isOff{
  opacity:.45;
}

.btn{
  border:1px solid rgba(17,24,39,.14);
  background:#fff;
  border-radius:12px;
  padding:8px 10px;
  font-size:12px;
  font-weight:6
00;
  cursor:pointer;
}
.btn:disabled{ opacity:.45; cursor:not-allowed; }
.btn.danger{
  border-color: rgba(225,29,72,.28);
  color:#e11d48;
}

.iconBtn{
  width:38px;
  height:38px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  border:1px solid rgba(17,24,39,.14);
  background:#fff;
  text-decoration:none;
  font-size:18px;
}

/* ✅ 지도/패널: 패널을 하단으로 내림 -> 지도가 더 커짐 */
.layout{
  margin-top:14px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

#mapWrap{
  position:relative;
  padding:10px 12px 12px;
  overflow:visible;         /* 라벨 잘림 방지 */
}

#mapError{
  position:absolute;
  left:12px; top:12px; right:12px;
  z-index:60;
  background:#fff;
  border:1px solid rgba(225,29,72,.28);
  border-radius:14px;
  padding:10px 12px;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
}

/* ✅ 지도 크게 */
#map{
  width:100%;
  /* ✅ keep map + bottom bar within one screen */
  height: calc(100vh - 230px);
  min-height: 640px;
  max-height: 840px;
}
#map svg{
  width:100%;
  height:100%;
  display:block;
}

/* 하단 패널 */
.sidePanel{
  padding:14px 16px;
}
.panelTitle{
  font-weight:950;
  margin-bottom:6px;
}
.panelBody{
  font-size:13px;
}

/* tooltip */
.tooltip{
  position:absolute;
  z-index:70;
  background:#fff;
  border:1px solid rgba(17,24,39,.12);
  border-radius:12px;
  padding:10px 12px;
  box-shadow:0 14px 32px rgba(0,0,0,.10);
  pointer-events:none;
  max-width:260px;
  display:none;
}
.tooltip .title{ font-weight:900; margin-bottom:8px; }
.tooltip .row{ display:flex; align-items:center; gap:8px; margin:4px 0; }

.badge{
  width:18px;
  height:18px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  color:#fff;
  font-size:10px;
  flex:0 0 auto;
}
.badge.e{ background:#e11d48; }
.badge.m{ background:#f59e0b; }
.badge.g{ background:#16a34a; }
.badge.t{ background:#b9a6ff; color:#241a49; }

/* =========================
   ADMIN (/admin)
   ========================= */

.adminWrap{
  margin-top:14px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.topbarMini{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:14px 16px;
}

.topbarMini .left{
  display:flex;
  flex-direction:column;
  gap:4px;
}
.topbarMini .title{
  font-weight:950;
  font-size:18px;
}
.topbarMini .desc{
  font-size:12px;
  color:var(--muted);
}

.pill{
  padding:6px 10px;
  border-radius:999px;
  background:#f3f4f6;
  border:1px solid rgba(17,24,39,.10);
  font-size:12px;
}
.pill.ok{
  background:#ecfdf5;
  border-color:#a7f3d0;
  color:#065f46;
}

.cardPad{ padding:14px 16px; }

.formGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
@media (max-width: 900px){
  .formGrid{ grid-template-columns: 1fr; }
}

.field{ display:flex; flex-direction:column; gap:6px; }
.field label{ font-size:12px; color:var(--muted); }

.input, select, input[type="text"]{
  border:1px solid rgba(17,24,39,.14);
  border-radius:12px;
  padding:9px 10px;
  font-size:13px;
  outline:none;
  background:#fff;
}

.rowActions{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:10px;
}

.tableWrap{
  border:1px solid var(--line);
  border-radius:14px;
  overflow:auto;
  background:#fff;
  max-height: 56vh;
}

.table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  font-size:12px;
}
.table thead th{
  position:sticky;
  top:0;
  background:#fbfbfc;
  z-index:2;
  border-bottom:1px solid var(--line);
  padding:10px 10px;
  text-align:left;
  white-space:nowrap;
  cursor:pointer;
}
.table tbody td{
  border-bottom:1px solid #f1f5f9;
  padding:8px 10px;
  vertical-align:middle;
}
.table tbody tr:hover{ background:#fafafa; }
.table tbody tr.dirty{ background:#fff7ed; }

.btnMini{
  border:1px solid rgba(17,24,39,.14);
  background:#fff;
  border-radius:999px;
  padding:6px 10px;
  font-size:11px;
  font-weight:500;
  cursor:pointer;
}
.btnMini.primary{ background:#111827; color:#fff; border-color:#111827; }
.btnMini.danger{ border-color:rgba(225,29,72,.28); color:#e11d48; background:#fff5f5; }
.btnMini:disabled{ opacity:.45; cursor:not-allowed; }


/* tooltip */
.tooltip{
  position:absolute;
  z-index:70;
  background:#fff;
  border:1px solid rgba(17,24,39,.12);
  border-radius:12px;
  padding:10px 12px;
  box-shadow:0 14px 32px rgba(0,0,0,.10);
  pointer-events:none;
  max-width:260px;
  display:none;

  /* ✅ 글씨 크기 조정 */
  font-size:11px;
  line-height:1.35;
}

.tooltip .title{
  font-size:12px;      /* ✅ 제목은 조금 크게 */
  font-weight:900;
  margin-bottom:6px;   /* 8px → 6px (원하면) */
}

.tooltip .row{
  display:flex;
  align-items:center;
  gap:8px;
  margin:3px 0;        /* 4px → 3px (원하면) */
}


.badge{
  width:14px;
  height:14px;
  font-size:8px;
}

/* Admin DB List: inputs compact */
#dbTable select,
#dbTable input{
  height:28px;          /* 기본 36~40px → 축소 */
  padding:2px 8px;
  font-size:12px;
  line-height:1.2;
}

#dbTable .partnerInp{
  padding:2px 8px;
}


#dbTable .col-check{
  width:20px;
}


#dbTable td,
#dbTable th{ padding:4px 6px; }

#dbTable select,
#dbTable input{ height:26px; font-size:11px; }



/* Admin - New Deal compact */
.newDeal,
.newDeal .card,
#newDealCard{
  padding:12px 14px;     /* 기존보다 축소 */
}


/* New Deal inputs compact */
#newContinent,
#newCountry,
#newDeal,
#newPartner{
  height:30px;
  padding:4px 8px;
  font-size:12px;
}

/* New Deal field spacing */
.field{
  margin-bottom:8px;     /* 기본 14~16px → 축소 */
}

/* New Deal Add button */
#btnAdd{
  height:28px;
  padding:0 14px;
  font-size:12px;
}


/* New Deal grid compact */
.formGrid{
  column-gap:12px;
  row-gap:8px;
}


/* ===== Admin > New Deal : single-row layout ===== */

/* New Deal 카드 안의 formGrid를 한 줄로 */
.newDeal .formGrid,
#newDealCard .formGrid,
.formGrid{
  display:grid;
  grid-template-columns:
    160px   /* Continent */
    260px   /* Country */
    160px   /* Deal */
    1fr     /* Partner */
    auto;   /* Add button */
  gap:10px;
  align-items:end;
}


/* field 줄바꿈 방지 */
.formGrid .field{
  margin-bottom:0;
  min-width:0;
}


/* Add button align */
#btnAdd{
  height:30px;
  padding:0 14px;
  font-size:12px;
  white-space:nowrap;
}

@media (max-width: 1100px){
  .formGrid{
    grid-template-columns: 1fr 1fr;
  }
}


/* === Bottom panel: All partners horizontal layout === */

.partnersRow{
  display:flex;
  flex-wrap:wrap;
  gap:10px 14px;
  align-items:center;
}

.partnerChip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  background:#f9fafb;
  border-radius:999px;
  border:1px solid rgba(17,24,39,.08);
  font-size:12px;
  font-weight:700;
}

.partnerChip .badge{
  width:16px;
  height:16px;
  font-size:9px;
}

.partnerName{
  white-space:nowrap;
}


.partnersRow.textOnly{
  display:flex;
  flex-wrap:wrap;
  gap:10px 16px;
  font-size:13px;
  line-height:1.4;
}

.partnerText{
  font-weight:700;
  color:#111827;
  white-space:nowrap;
}
